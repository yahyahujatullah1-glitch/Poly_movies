"use strict";var __awaiter=this&&this.__awaiter||function(thisArg,_arguments,P,generator){return new(P||(P=Promise))(function(resolve,reject){function fulfilled(value){try{step(generator.next(value))}catch(e){reject(e)}}function rejected(value){try{step(generator.throw(value))}catch(e){reject(e)}}function step(result){var value;result.done?resolve(result.value):(value=result.value,value instanceof P?value:new P(function(resolve){resolve(value)})).then(fulfilled,rejected)}step((generator=generator.apply(thisArg,_arguments||[])).next())})};Object.defineProperty(exports,"__esModule",{value:!0}),exports.getMeta=void 0;const getMeta=function(_a){return __awaiter(this,arguments,void 0,function*({link:link,providerContext:providerContext}){var _b;try{const{axios:axios,cheerio:cheerio}=providerContext,url=link,baseUrl=link.split("/").slice(0,3).join("/"),res=yield axios.get(url),html=yield res.data,$=cheerio.load(html),imdbId=(null===(_b=$(".movie_info").find('a[href*="imdb.com/title/tt"]:not([href*="imdb.com/title/tt/"])').attr("href"))||void 0===_b?void 0:_b.split("/")[4])||"",type=$(".show_season").html()?"series":"movie",linkList=[];return $(".show_season").each((i,element)=>{const seasonTitle="Season "+$(element).attr("data-id"),episodes=[];$(element).children().each((i,element2)=>{const episodeTitle=$(element2).find("a").children().remove().end().text().trim().replace("E","Epiosode "),episodeLink=baseUrl+$(element2).find("a").attr("href");episodeTitle&&episodeLink&&episodes.push({title:episodeTitle,link:episodeLink})}),linkList.push({title:seasonTitle,directLinks:episodes})}),"movie"===type&&linkList.push({title:"Movie",directLinks:[{link:link,title:"Movie",type:"movie"}]}),{title:"",image:"",imdbId:imdbId,synopsis:"",type:type,linkList:linkList}}catch(error){return{title:"",image:"",imdbId:"",synopsis:"",linkList:[],type:"uhd"}}})};exports.getMeta=getMeta;
